@page "/edit-ticket/{Tid}"
@attribute [Authorize]

<RadzenRow>
<RadzenColumn SizeMD="12">
        <RadzenTemplateForm TItem="ITTicketingProject.Server.Models.TicketingDB.Ticket" Data="@ticket"Visible="@(ticket != null)" Submit="@Button0Click"> 
        <RadzenAlert Title="Cannot update ticket" Shade="Shade.Lighter" Variant="Variant.Flat" Size="AlertSize.Small" AlertStyle="AlertStyle.Danger" Visible="@errorVisible">@error</RadzenAlert>           
             <RadzenRow style="margin-bottom: 1rem">
                <RadzenColumn SizeMD="3">
                    <RadzenLabel Component="AffectedUser" style="width: 100%" Text="Affected User" />
                </RadzenColumn>
                <RadzenColumn SizeMD="9">
                     <RadzenDropDownDataGrid Style = "display: block; width: 100%" Name="AffectedUser" TValue="string" Data="@user" ValueChanged="@(args => ticket.AffectedUser = args)" TextProperty="Name" ValueProperty="UserName"></RadzenDropDownDataGrid>
                    <RadzenRequiredValidator Component="AffectedUser" Text="Affected user is required" />
                </RadzenColumn>
            </RadzenRow>
             <RadzenRow style="margin-bottom: 1rem">
                <RadzenColumn SizeMD="3">
                    <RadzenLabel Component="Description" style="width: 100%" Text="Description" />
                </RadzenColumn>
                <RadzenColumn SizeMD="9">
                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@(ticket.Description)" Name="Description" />
                    <RadzenRequiredValidator Component="Description" Text="Description is required" />
                </RadzenColumn>
            </RadzenRow>
            <RadzenRow style="margin-bottom: 1rem">
                <RadzenColumn SizeMD="3">
                    <RadzenLabel Component="Location" style="width: 100%" Text="Location" />
                </RadzenColumn>
                <RadzenColumn SizeMD="9">
                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@(ticket.Location)" Name="Location" />
                    <RadzenRequiredValidator Component="Location" Text="Location is required" />
                </RadzenColumn>
            </RadzenRow>
            <RadzenRow style="margin-bottom: 1rem">
                <RadzenColumn SizeMD="3">
                    <RadzenLabel Component="Owner" style="width: 100%" Text="Owner" />
                </RadzenColumn>
                <RadzenColumn SizeMD="9">
                    <RadzenDropDownDataGrid Style = "display: block; width: 100%" Name="Owner" TValue="string" Data="@user" ValueChanged="@(args => ticket.Owner = args)" TextProperty="Name" ValueProperty="UserName"></RadzenDropDownDataGrid>
                    <RadzenRequiredValidator Component="Owner" Text="Owner is required" />
                </RadzenColumn>
            </RadzenRow>
            <RadzenRow style="margin-bottom: 1rem">
                <RadzenColumn SizeMD="3">
                    <RadzenLabel Component="Status" style="width: 100%" Text="Status" />
                </RadzenColumn>
                <RadzenColumn SizeMD="9">
                    <RadzenDropDown TItem = "ITTicketingProject.Server.Models.TicketingDB.Ticket" style="display: block; width: 100%" @bind-Value="@(ticket.Status)" Name="Status" Data="@status" />
                    <RadzenRequiredValidator Component="Status" Text="Status is required" />
                </RadzenColumn>
            </RadzenRow>
            
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End" Gap="0.5rem">
                    <RadzenButton ButtonType="ButtonType.Submit" Icon="save" Text="Save" Variant="Variant.Flat" />
                    <RadzenButton ButtonStyle="ButtonStyle.Light" Icon="delete" Text="Delete" Variant="Variant.Flat" ButtonType="Radzen.ButtonType.Button"Click = "@Button1Click"/>
            </RadzenStack>
        </RadzenTemplateForm>
</RadzenColumn>
</RadzenRow>